# krateo-overrides.yaml - User customizations
# Place this in your working directory and run: krateoctl plan/apply
# This file overrides the base krateo.yaml configuration using component names.

# Optional: select a default profile defined below.
# You can also override this from the CLI with:
#   krateoctl plan --profile dev
#   krateoctl apply --profile dev
#
# profile: dev

# Predefined profiles (examples)
# profiles:
#   dev:
#     components:
#       finops:
#         enabled: false
#   prod:
#     components:
#       finops:
#         enabled: true

# ============================================================================
# Component-based Customization
# Available components are defined in krateo.yaml under 'components' section
# ============================================================================

components:
  # Example: Customize authentication service
  # - enabled:      toggle the whole component on/off
  # - helmDefaults: defaults applied to ALL chart steps of this component
  # - stepConfig:   per-step overrides keyed by step id (only for chart steps)
  authn:
    enabled: true
    # helmDefaults:
    #   service:
    #     nodePort: 3000           # applies to all authn chart steps
    #   env:
    #     SESSION_TIMEOUT: "3600"

  # Example: Customize frontend single chart step via stepConfig
  frontend:
    enabled: true
    # stepConfig:
    #   install-frontend:
    #     helmValues:
    #       service:
    #         nodePort: 8080
    #       config:
    #         CUSTOM_API_URL: https://api.mycompany.io

  # Example: Customize eventsse component
  # - helmDefaults: applied to all eventsse chart steps (install-eventsse-etcd, install-eventsse, install-sweeper)
  # - stepConfig:   refine settings for a specific chart step only
  eventsse:
    enabled: true
    # helmDefaults:
    #   env:
    #     COMMON_ENV: "foo"       # visible to all eventsse-related charts
    # stepConfig:
    #   install-eventsse:
    #     helmValues:
    #       env:
    #         EVENTSSE_LOG_LEVEL: debug

  # Example: Disable FinOps (optional cost management module)
  finops:
    enabled: false

  # Example: For development - override core-provider with local chart
  core-provider:
    enabled: true
    # stepConfig:
    #   install-core-provider:
    #     helmValues:
    #       image:
    #         repository: localhost:5000/core-provider
    #         tag: latest
    #         pullPolicy: Always

# ============================================================================
# Alternative: Step-level Overrides (advanced)
# Only use if you need fine-grained control over individual steps.
# Otherwise, prefer component-level customization above.
# ============================================================================

# Example of step-level override (uncomment to use):
# steps:
#   - id: install-authn
#     with:
#       values:
#         service:
#           nodePort: 3000
#
#   - id: install-finops-cratedb
#     skip: true  # Skip this step
